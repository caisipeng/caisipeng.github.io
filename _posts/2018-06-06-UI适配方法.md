---layout: posttitle: 'UI适配方法'date: 2018-06-12author: cspcover: 'http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-21/62006694.jpg'tags: UI适配---> 如何一稿设配双平台# UI适配方法## 适配的核心概念——名词解释- 物理像素（物理分辨率）> 屏幕是由多个像素点组成的，平时购买手机上写的分辨率便说的是这些像素点例如iphone6分辨率为750*1334，即是有750行1334列的像素点组成的屏幕，是一个绝对单位，单位是PX。- 渲染像素（设计师用的）> 设计师设计稿上用的尺寸单位，可以理解成和物理像素一样单位也是PX。- 逻辑像素（开发者用的）> 逻辑点，是控制屏幕显示内容多少的单位，ios用的单位是pt，安卓用的单位是dp（图形的单位）和sp（字体的单位），这些单位都是相对单位。- 倍率> 物理像素和逻辑像素共同组成了电子设备屏幕，物理像素在硬件层面上构成了液晶屏幕；逻辑像素在软件层面构成了画面图像。既然逻辑像素是相对像素那么它是以什么作为标准的呢？——（像素密度），不同的屏幕有不同的像素密度，根据像素密度不同逻辑像素和物理像素会成倍数关系，这个就是倍率。（倍率=渲染像素/逻辑像素）以下是苹果和安卓设备的上的尺寸倍率：![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-13/33517783.jpg)注：由于安卓市场的设备型号千奇百态，因此Andriod系统会根据手机屏幕的大小及屏幕密度去选择不同文件夹下的图片资源，以此来实现在不同大小不同屏幕分辨率下适配的问题。这些文件夹分别对应的就是xxxhdpi、xxhdpi、xhdpi、hdpi、mdpi、ldpi这几种密度规格。那么如何判断设备是归属于哪种密度规格？安卓对于每种密度规格给出对应的系统密度值（dpi）- xxxhdpi——640- xxhdpi——480- xhdpi——320- hdpi——240- mdpi——160- ldpi——120想要知道设备是属于哪种密度规格只需要计算出设备的密度去匹配安卓系统给出的系统密度值即可。计算密度值dpi公式=√（屏幕分辨率长²+屏幕分辨率宽²）/屏幕尺寸，不过安卓手机设备的尺寸是有很多这样一来算出来的密度值会和系统给出的密度值会有上下浮动。例子：目标设备型号是华为P2O，已知分辨率为：2244*1080px，屏幕尺寸：5.8英寸，根据公式算出dpi=429，对应的是xxhdpi。## 适配方法：### 倍率适配（应用于不同倍率上的适配）案例：iphone6适配到安卓1920*1080上错误的适配方法是按设计稿等比缩放正确的适配原则应该是不同倍率下等比缩放界面中的元素，同倍率下适配界面元素中的大小（一般是图片，控件的大小是一样的）、控件的间距等。正确的方法流程应该是：1. 以设计稿的倍率为基准（这里假如设计稿就是@2的倍率）2. 调整目标适配画板倍率和设计稿画板一致（1080 * 1920变成720 * 1280）3. 根据设计稿内元素布局对目标适配画板进行调整（逻辑适配下面会提到）4. 将目标适配画板调整回@3的倍率需要注意的地方：由于等比缩放，图标和分割线会出现1.5倍的情况由此会产生出虚边，所以适配完后还需要单独调整图标和分割线。### 逻辑适配（应用于同倍率不同分辨率或尺寸的适配）原则：1. 文本流2. 弹性控件- 控件之间的间距- 显示的数量3. 等比缩放（一般用于图片）  #### 文本流距离屏幕边缘或其他元素间距固定，自身宽度自适应，高度随内容增加而增加，单行的文本一般可以当做是控件。#### 弹性控件组件大小不变，距离屏幕边缘间距固定，中间间距自适应，屏幕越宽一行显示的内容越多。总结有以下适配方法：1. 元素大小不变，间距自适应（距离屏幕尺寸不变）2. 间距固定不变，元素大小自适应3. 间距固定不变，元素大小不变，元素数量自适应4. 整体等比缩放#### 等比缩放尺寸大小随屏幕宽度变化（同倍率情况下）而自适应（标注时不需要标注固定宽度），宽度越宽高度也越高首屏的内容会减少。# 适配iphone x## 相关概念![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-13/78743060.jpg)### 1.屏幕尺寸根据官方给出的参数可以看出iphoneX的逻辑像素为375*812pt倍率为3，可以看成是与iphone6加长版（垂直增加了145pt）。### 2.引入安全区域概念原有苹果机型中，安全区默认代表除了状态栏以外的屏幕范围，而随着iPhoneX顶部刘海和底部Home indicator的出现，是的现今iPhoneX的安全域特指距上44pt，距下34pt的屏幕区域。![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-13/93694336.jpg)### 3.Home indicator置于屏幕最底部的Home indicator集成了原有Home退出&切换系统应用的功能，适配过程中添加方法可以控制此区域内背景的颜色/透明度/高度/出现与否。（官方给出的高度是34pt）## 适配规则根据iphoneX屏幕特性适配对象可以分为顶部区域、安全区域、底部区域### 顶部元素（状态栏+导航栏）iphoneX顶部元素与普通的屏幕区别在于状态栏的高度为44pt，比普通的多24pt，大概有以下几种情形：1. 状态栏颜色和导航栏颜色一致或者设置成另外一种颜色（这种适配最简单）2. 如果背景是渐变（水平渐变不用考虑）或者是图像海报的话，适配可以将图像向上延伸24pt不过这样就会有两张背景图导致增加app大小，另外一种方法就是按照iphoneX的顶部背景高度### 安全区域1. 安全区域的内容如果是只有单屏（如工具类、音乐类或H5活动页），控件和内容元素左右间距不变，可以调整控件高度或上下间距。2. 安全区域的内容如果是可以滑动的，向下适配更多的内容，如果是瀑布流底部没有操作的，内容可以与Home indicator重叠，如果底部有操作则预留34pt的区域放置Home indicator。### 底部元素1. 底部无操作场景：设定Home indicaror背景色为透明，信息内容撑满屏幕展示。![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-17/40724255.jpg)2. 底部有操作场景：- 2.1.底部Tab bar、筛选项、输入框、底部浮出的半屏弹窗等吸附于距下34pt的Home indicaror之上，Home indicaror背景色与底部Bar底色保持一致。![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-17/53644520.jpg)- 2.2.底部有操作按钮的放在距下34pt的Home indicaror之上不能与之重叠。![image](http://csp-image.oss-cn-shenzhen.aliyuncs.com/18-7-17/50413574.jpg)